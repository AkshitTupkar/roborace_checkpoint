<!DOCTYPE HTML>
<html>
<head>
  <title>ESP-NOW Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</head>
<body>
    
    <style>
     body{
    background-image: url(https://wallpaper.forfun.com/fetch/7f/7fd7c66ecefecd3da76c4c9554a01f55.jpeg);
    background-repeat: no-repeat;}
    html {font-family: Arial; display: inline-block; text-align: center;}
    p {font-size: 1.5rem;}
    body {margin: 0;}
    .topnav {overflow: hidden; color: white; padding: 10px;}
    .content {padding: 20px;}
    .card {background-color: white; box-shadow: 2px 2px 12px 1px rgba(140,140,140,.5); padding: 20px; border-radius: 25px;}
    .cards {font-family: Arial, Helvetica, sans-serif; display: grid; grid-gap: 2rem; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); max-width: 1000px; margin: 0 auto;}
    .reading {font-size: 2rem; color: #333;}
    .packet {color: #555;}
    h4{font-size: 1.8rem;}
    @font-face {font-family:'road';src: url('SuperRoadDemoRegular.ttf')}
    h1{ font-family: 'road';background: linear-gradient(to bottom, #ffff00 , gold );
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent; 
    background-clip: text; 
    -webkit-text-fill-color: transparent;
    font-size: 4.7rem;}
    </style>

  <div class="topnav">
    <h1>PATH OF PRIMES SCOREBOARD</h1>
  </div>
  <div class="content">
    <div class="cards">
      <div class="card">
        <h4>CHECKPOINT 1</h4>
        <p>Points: <span class="reading" id="t1">--</span></p>
      </div>

      <div class="card">
        <h4>CHECKPOINT 2</h4>
        <p>Points: <span class="reading" id="t2">--</span></p>
      </div>

      <div class="card">
        <h4>CHECKPOINT 3</h4>
        <p>Points: <span class="reading" id="t3">--</span></p>
      </div>

      <div class="card">
        <h4>CHECKPOINT 4</h4>
        <p>Points: <span class="reading" id="t4">--</span></p>

      </div>
      <div class="card">
        <h4>CHECKPOINT 5</h4>
        <p>Points: <span class="reading" id="t5">--</span></p>
      </div>

    </div>
  </div>
  <script>
    if (!!window.EventSource) {
      var source = new EventSource('/events');

      source.addEventListener('open', function(e) {
        console.log("Events Connected");
      }, false);

      source.addEventListener('error', function(e) {
        if (e.target.readyState != EventSource.OPEN) {
          console.log("Events Disconnected");
        }
      }, false);

      source.addEventListener('new_readings', function(e) {
        console.log("new_readings", e.data);
        var obj = JSON.parse(e.data);
        var checkpointId = obj.id;
        if (checkpointId >= 1 && checkpointId <= 5) {
          
          document.getElementById("t" + checkpointId).innerHTML = obj.check.toFixed(2);
          
        }
      }, false);
    }
  </script>
</body>
</html>